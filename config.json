{"icon":"grey","name":"travelMoneyAssistant","version":"1.0","pages":[{"name":"welcome","config":[],"content":[{"name":"item_916a939e","type":"navigation","item-type":"title-bar","content":[{"name":"title","type":"content","item-type":"title","content":"<h1>Welcome</h1>","expressions":{}}],"extends":{"type":"area","item-type":"row"}},{"name":"item_dcf8f192","type":"area","item-type":"scrollable","content":[{"name":"compassButton","type":"control","item-type":"button","content":"Show compass heading <span class='icon icon-compass5'></span>","expressions":{},"actions":[{"event":"click","type":"call-plugin","data":{"name":"compass","operation":"getCurrentHeading"}}]},{"name":"heading","type":"content","item-type":"html","content":"<center><p>You are currently moving in a direction of</p><h4>{{'data__.plugin.compass.getCurrentHeading.magneticHeading' | store}}Â°</h4></center>","expressions":{"show":"data__.plugin.compass.getCurrentHeading != undefined"}},{"name":"item_5501e9b3","type":"component","item-type":"web-component-es2015","template":"<date-widget></date-widget>","content":"","component":"date_widget","attributes":{"theme":"green"}},{"name":"navButton","type":"navigation","item-type":"nav-button","content":"<span class=\"icon icon-coins\"></span> Currency Converter","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"currency"}],"expressions":{}}]}]},{"name":"currency","config":[],"content":[{"name":"item_c6678f66","type":"navigation","item-type":"title-bar","content":[{"name":"title","type":"content","item-type":"title","content":"<h1>Currency Converter</h1>","expressions":{}}],"extends":{"type":"area","item-type":"row"}},{"name":"item_71eca4be","type":"area","item-type":"scrollable","content":[{"name":"amount","type":"question","item-type":"number","label":"Amount:","required":true,"expressions":{},"validators":[{"name":"value","message":"Please enter a valid amount","type":"regex","content":"^\\d+(\\.\\d{2})?$"}],"message":"This is a required field"},{"name":"from","type":"question","item-type":"select","label":"From:","required":true,"options":[{"label":"Auto","value":"auto"},{"label":"Australian Dollar","value":"AUD"},{"label":"Brazilian Real","value":"BRL"},{"label":"British Pound","value":"GBP"},{"label":"Bulgarian Lev","value":"BGN"},{"label":"Canadian Dollar","value":"CAD"},{"label":"Croatian Kuna","value":"HRK"},{"label":"Czech Koruna","value":"CZK"},{"label":"Danish Krone","value":"DKK"},{"label":"Euro","value":"EUR"},{"label":"Hong Kong Dollar","value":"HKD"},{"label":"Hungarian Forint","value":"HUF"},{"label":"Indian Rupee","value":"INR"},{"label":"Indonesian Rupiah","value":"IDR"},{"label":"Israeli New Shekel","value":"ILS"},{"label":"Japanese Yen","value":"JPY"},{"label":"Korean Won","value":"KRW"},{"label":"Malaysian Ringgit","value":"MYR"},{"label":"Mexican Nuevo Peso","value":"MXN"},{"label":"New Zealand Dollar","value":"NZD"},{"label":"Norwegian Krone","value":"NOK"},{"label":"Philippine Peso","value":"PHP"},{"label":"Polish Zloty","value":"PLN"},{"label":"Romanian New Leu","value":"RON"},{"label":"Russian Ruble","value":"RUB"},{"label":"Singapore Dollar","value":"SGD"},{"label":"South African Rand","value":"ZAR"},{"label":"Swedish Krona","value":"SEK"},{"label":"Swiss Franc","value":"CHF"},{"label":"Thai Baht","value":"THB"},{"label":"Turkish Lira","value":"TRY"},{"label":"US Dollar","value":"USD"},{"label":"Yuan Renminbi","value":"CNY"}],"searchable":true,"message":"This is a required field","expressions":{},"actions":[],"validators":[]},{"name":"to","type":"question","item-type":"select","label":"To:","required":true,"options":[{"label":"Auto","value":"auto"},{"label":"Australian Dollar","value":"AUD"},{"label":"Brazilian Real","value":"BRL"},{"label":"British Pound","value":"GBP"},{"label":"Bulgarian Lev","value":"BGN"},{"label":"Canadian Dollar","value":"CAD"},{"label":"Croatian Kuna","value":"HRK"},{"label":"Czech Koruna","value":"CZK"},{"label":"Danish Krone","value":"DKK"},{"label":"Euro","value":"EUR"},{"label":"Hong Kong Dollar","value":"HKD"},{"label":"Hungarian Forint","value":"HUF"},{"label":"Indian Rupee","value":"INR"},{"label":"Indonesian Rupiah","value":"IDR"},{"label":"Israeli New Shekel","value":"ILS"},{"label":"Japanese Yen","value":"JPY"},{"label":"Korean Won","value":"KRW"},{"label":"Malaysian Ringgit","value":"MYR"},{"label":"Mexican Nuevo Peso","value":"MXN"},{"label":"New Zealand Dollar","value":"NZD"},{"label":"Norwegian Krone","value":"NOK"},{"label":"Philippine Peso","value":"PHP"},{"label":"Polish Zloty","value":"PLN"},{"label":"Romanian New Leu","value":"RON"},{"label":"Russian Ruble","value":"RUB"},{"label":"Singapore Dollar","value":"SGD"},{"label":"South African Rand","value":"ZAR"},{"label":"Swedish Krona","value":"SEK"},{"label":"Swiss Franc","value":"CHF"},{"label":"Thai Baht","value":"THB"},{"label":"Turkish Lira","value":"TRY"},{"label":"US Dollar","value":"USD"},{"label":"Yuan Renminbi","value":"CNY"}],"searchable":true,"message":"This is a required field","expressions":{},"actions":[],"validators":[]},{"name":"currencyButton","type":"control","item-type":"button","content":"Submit <span class=\"icon icon-enter\"></span>","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"params":{},"name":"currencyFunction"}},{"event":"click","type":"start-timer","data":{"name":"fixerDelay"}}]},{"name":"convertedCurrency","type":"content","item-type":"html","content":"<h3><center>{{'data__.variables.fromCurrency' | store}} {{'currency.amount' | store}} = {{'data__.variables.toCurrency' | store}} {{'currency.amount * data__.api.Fixerio.getLatest.rates[data__.variables.toCurrency]' | store | number:2}}</center></h3>","expressions":{"show":"data__.api.Fixerio.getLatest.rates != undefined"}}]},{"name":"item_430a919b","type":"navigation","item-type":"button-bar","content":[{"name":"homeBtn","type":"navigation","item-type":"nav-button","content":"<span class=\"icon icon-home6\"></span> Home","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"welcome"}],"expressions":{}}],"extends":{"type":"area","item-type":"row"}}]}],"config":[{"name":"compass","type":"integration","item-type":"plugin","events":{},"actions":{},"params":[],"operations":[{"name":"getCurrentHeading","params":[{"name":"$successCallback"},{"name":"$errorCallback"}]}]},{"name":"Fixerio","type":"integration","item-type":"api","headers":{},"params":[],"operations":[{"name":"getLatest","summary":"Returns latest foreign exchange rates","path":"/latest","method":"JSONP","params":[{"name":"base","description":"Base currency","type":"string","in":"query"},{"name":"symbols","description":"Specify currency to convert to","type":"string","in":"query"},{"name":"callback","description":"Make cross-domain JSONP requests","type":"string","in":"query"}]}],"url":"http://api.fixer.io"},{"name":"RESTCountries","type":"integration","item-type":"api","headers":{},"params":[],"operations":[{"name":"all","method":"GET","path":"/all","params":[]},{"name":"countryName","method":"GET","path":"/name/{{name}}","params":[{"name":"name","type":"string","description":"Country name or substring","in":"path","required":true},{"name":"fullText","type":"boolean","description":"Mark as true if name is full name of country","in":"query","required":false}]},{"name":"countryCode","method":"GET","path":"/alpha/{{code}}","params":[{"name":"code","type":"string","description":"Country code","in":"path","required":true}]},{"name":"countryCodes","method":"GET","path":"/alpha","params":[{"name":"codes","type":"string","description":"Country codes as colon separated list","in":"query","required":true}]},{"name":"region","method":"GET","path":"/region/{{region}}","params":[{"name":"region","type":"string","description":"Region","in":"path","required":true}]},{"name":"subRegion","method":"GET","path":"/subregion/{{subregion}}","params":[{"name":"subregion","type":"string","description":"Sub region","in":"path","required":true}]},{"name":"capitalCity","method":"GET","path":"/capital/{{capitalCity}}","params":[{"name":"capitalCity","type":"string","description":"Capital city","in":"path","required":true}]},{"name":"language","method":"GET","path":"/lang/{{language}}","params":[{"name":"language","type":"string","description":"Language code","in":"path","required":true}]},{"name":"callingCode","method":"GET","path":"/callingcode/{{callingCode}}","params":[{"name":"callingCode","type":"string","description":"Calling code","in":"path","required":true}]},{"name":"currency","method":"GET","path":"/currency/{{currency}}","params":[{"name":"currency","type":"string","description":"Currency","in":"path","required":true}]}],"url":"https://restcountries.eu/rest/v1"},{"name":"currencyFunction","type":"script","item-type":"function","params":[],"content":"var xhr = new XMLHttpRequest();\n\n//fromCurrency\nif (mdm.store.currency.from != \"auto\") {\n    //Uses user entry if not \"auto\"\n    mdm.store.data__.variables.fromCurrency = mdm.store.currency.from;\n} else {\n    //If user entry is \"auto\" this uses the Globalization plugin and Countries API to automatically set the fromCurrency to be that of the device's locale\n    //Globalization Plugin start\n    navigator.globalization.getLocaleName(\n        function(locale) {\n            var fromLocaleTemp = locale.value\n            var fromLocale = fromLocaleTemp.replace(/(.*)-/g, \"\");\n            //Countries API start\n            xhr.open(\"GET\", \"https://restcountries.eu/rest/v1/alpha/\" + fromLocale, true);\n            xhr.onload = function() {\n                if (xhr.status === 200) {\n                    var fromCurrency = JSON.parse(xhr.responseText).currencies[0];\n                    mdm.store.data__.variables.fromCurrency = fromCurrency;\n                }\n            }\n            xhr.send();\n        },\n        function() {\n            alert('Error getting locale');\n        }\n    );\n};\n//toCurrency\nif (mdm.store.currency.to != \"auto\") {\n    //Uses user entry if not \"auto\"\n    mdm.store.data__.variables.toCurrency = mdm.store.currency.to;\n} else {\n    //If user entry is \"auto\" this uses the Geolocation plugin, Bing Maps API and Countries API to automatically set the fromCurrency to be that of the device's current location\n    //Geolocation Plugin start\n    document.addEventListener(\"deviceready\", onDeviceReady, false);\n\n    function onDeviceReady() {\n        navigator.geolocation.getCurrentPosition(onSuccess, onError);\n    }\n\n    function onSuccess(position) {\n        var toLatLong = position.coords.latitude + \",\" + position.coords.longitude;\n        //Bing Maps API\n        function getCountryName(toLatLong, callback) {\n            var xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", \"http://dev.virtualearth.net/REST/v1/Locations/\" + toLatLong + \"?includeEntityTypes=CountryRegion&includeNeighborhood=0&key=AtmHjDLo_AIK5OgtJ9ayHj_9luVUkdJPbW2NPEWqxNl936O6PAzAzROg4XGB9GpB\", true);\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    var responseObject = JSON.parse(xhr.responseText);\n                    callback(responseObject);\n                }\n            }\n            xhr.send();\n        }\n        //Countries API\n        function getLocale(countryName, callback) {\n            var toCountry = countryName\n            var xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", \"https://restcountries.eu/rest/v1/name/\" + toCountry, true);\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    var responseObject = JSON.parse(xhr.responseText);\n                    callback(responseObject);\n                }\n            }\n            xhr.send();\n        }\n        getCountryName(toLatLong, function(response) {\n            var countryName = response.resourceSets[0].resources[0].address.countryRegion;\n            getLocale(countryName, function(data) {\n                mdm.store.data__.variables.toCurrency = (data[0].currencies[0])\n            })\n        });\n    };\n\n    function onError(error) {\n        alert(\"code: \" + error.code + '\\n' + \"message: \" + error.message);\n    };\n};"},{"name":"fromCurrency","type":"script","item-type":"variable","variable-type":"string"},{"name":"toCurrency","type":"script","item-type":"variable","variable-type":"string"},{"name":"fixerDelay","type":"script","item-type":"timer","timer-type":"delay","time":"2","actions":[{"event":"click","type":"call-api","data":{"method":"get","name":"Fixerio","operation":"getLatest","params":{"base":"{{data__.variables.fromCurrency}}","symbols":"{{data__.variables.toCurrency}}"}}}]}],"components":[{"type":"web-component-es2015","usage":"<date-widget></date-widget>","content":"InVzZSBzdHJpY3QiOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCnZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCJ2YWx1ZSIgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCihmdW5jdGlvbiAoKSB7CgogICAgdmFyIHRlbXBsYXRlID0gIlxuICAgIDxzdHlsZT5cbiAgICAgICAgQGltcG9ydCB1cmwoaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9Um9ib3RvK0NvbmRlbnNlZDo0MDAsMzAwLDcwMCk7XG4gICAgLmNvbnRhaW5lciB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkY7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgYm94LXNoYWRvdzogMCAwIDVweCAjZGFkYWRhO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDEwMHB4O1xuICAgICAgICBmb250LWZhbWlseTogJ1JvYm90byBDb25kZW5zZWQnLCBzYW5zLXNlcmlmO1xuICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICB9XG4gICAgLmNvbnRhaW5lciAubGVmdCB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgIGNvbG9yOiAjRkZGO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHggMCAwIDVweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiAxOHB4IDAgMCAwO1xuICAgIH1cbiAgICAuY29udGFpbmVyIC5sZWZ0IC5tb250aCB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAgICAgICBmb250LXdlaWdodDogMzAwO1xuICAgIH1cbiAgICAuY29udGFpbmVyIC5sZWZ0IC5kYXkge1xuICAgICAgICBmb250LXNpemU6IDQwcHhcbiAgICB9XG4gICAgLmNvbnRhaW5lciAucmlnaHQge1xuICAgICAgICBtYXJnaW4tbGVmdDogMzAlO1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDEwcHggMTBweCAxNXB4O1xuICAgICAgICBjb2xvcjogIzMzMztcbiAgICB9XG4gICAgLmNvbnRhaW5lciAucmlnaHQgLmRheS1sb25nIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMzVweDtcbiAgICB9XG4gICAgLmNvbnRhaW5lciAucmlnaHQgLnRpbWUge1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgZm9udC1zaXplOiAzNXB4O1xuICAgICAgICBsaW5lLWhlaWdodDogNDBweDtcbiAgICB9XG4gICAgLyogVEhFTUUgQ09ERSAqL1xuICAgIC5jb250YWluZXIuZ3JlZW4gLmxlZnQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzdiYzliO1xuICAgIH1cbiAgICAuY29udGFpbmVyLmdyZWVuIC5kYXktbG9uZyB7XG4gICAgICAgIGNvbG9yOiAjMjc4YjcwO1xuICAgIH1cbiAgICAuY29udGFpbmVyLnJlZCAubGVmdCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNiYzI3NTE7XG4gICAgfVxuICAgIC5jb250YWluZXIucmVkIC5kYXktbG9uZyB7XG4gICAgICAgIGNvbG9yOiAjOTIyMTQ2O1xuICAgIH1cbiAgICAuY29udGFpbmVyLmJsdWUgLmxlZnQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzU2ZGJjO1xuICAgIH1cbiAgICAuY29udGFpbmVyLmJsdWUgLmRheS1sb25nIHtcbiAgICAgICAgY29sb3I6ICMyZDVlYTM7XG4gICAgfVxuICAgIC5jb250YWluZXIuZ29sZCAubGVmdCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNiYzk2MDA7XG4gICAgfVxuICAgIC5jb250YWluZXIuZ29sZCAuZGF5LWxvbmcge1xuICAgICAgICBjb2xvcjogIzlhN2IwMDtcbiAgICB9XG4gICAgPC9zdHlsZT5cbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb250aFwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmlnaHRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRheS1sb25nXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAiOwoKICAgIHZhciBtb250aHMgPSBbIkphbnVhcnkiLCAiRmVicnVhcnkiLCAiTWFyY2giLCAiQXByaWwiLCAiTWF5IiwgIkp1bmUiLCAiSnVseSIsICJBdWd1c3QiLCAiU2VwdGVtYmVyIiwgIk9jdG9iZXIiLCAiTm92ZW1iZXIiLCAiRGVjZW1iZXIiXTsKICAgIHZhciBkYXlzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddOwoKICAgIHZhciBEYXRlV2lkZ2V0ID0gKGZ1bmN0aW9uIChfSFRNTEVsZW1lbnQpIHsKICAgICAgICBfaW5oZXJpdHMoRGF0ZVdpZGdldCwgX0hUTUxFbGVtZW50KTsKCiAgICAgICAgZnVuY3Rpb24gRGF0ZVdpZGdldCgpIHsKICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9EYXRlV2lkZ2V0KTsKCiAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKF9EYXRlV2lkZ2V0LnByb3RvdHlwZSksICJjb25zdHJ1Y3RvciIsIHRoaXMpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQoKICAgICAgICBfY3JlYXRlQ2xhc3MoRGF0ZVdpZGdldCwgW3sKICAgICAgICAgICAga2V5OiAiY3JlYXRlZENhbGxiYWNrIiwKCiAgICAgICAgICAgIC8vIEZpcmVzIHdoZW4gYW4gaW5zdGFuY2Ugb2YgdGhlIGVsZW1lbnQgaXMgY3JlYXRlZC4KICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZWRDYWxsYmFjaygpIHsKICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJIVE1MID0gdGVtcGxhdGU7CgogICAgICAgICAgICAgICAgLy9HcmFiIHRoZSBlbGVtZW50cyBmcm9tIHRoZSBzaGFkb3cgcm9vdAogICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICB0aGlzLiRtb250aCA9IHRoaXMucXVlcnlTZWxlY3RvcignLm1vbnRoJyk7CiAgICAgICAgICAgICAgICB0aGlzLiRkYXkgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5kYXknKTsKICAgICAgICAgICAgICAgIHRoaXMuJGRheUxvbmcgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5kYXktbG9uZycpOwogICAgICAgICAgICAgICAgdGhpcy4kdGltZSA9IHRoaXMucXVlcnlTZWxlY3RvcignLnRpbWUnKTsKCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRoZW1lKHRoaXMuZ2V0QXR0cmlidXRlKCd0aGVtZScpKTsKCiAgICAgICAgICAgICAgICAvL0NhbGwgdGhlIGRyYXcgZnVuY3Rpb24gaW5pdGlhbGx5CiAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTsKICAgICAgICAgICAgICAgIC8vQ2FsbCB0aGUgZHJhdyBmdW5jdGlvbiBldmVyeSBzZWN0aW9uIHRvIHVwZGF0ZSB0aGUgdGltZQogICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHRoYXQuZHJhdygpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICAgIGtleTogImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayIsCgogICAgICAgICAgICAvLyBGaXJlcyB3aGVuIGFuIGF0dHJpYnV0ZSB3YXMgYWRkZWQsIHJlbW92ZWQsIG9yIHVwZGF0ZWQuCiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ck5hbWUsIG9sZFZhbCwgbmV3VmFsKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF0dHJOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAidGhlbWUiOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRoZW1lKG5ld1ZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJkcmF3IiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgdGhpcy4kbW9udGguaW5uZXJIVE1MID0gbW9udGhzW3RoaXMuZGF0ZS5nZXRNb250aCgpXTsKICAgICAgICAgICAgICAgIHRoaXMuJGRheS5pbm5lckhUTUwgPSB0aGlzLmRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgdGhpcy4kZGF5TG9uZy5pbm5lckhUTUwgPSBkYXlzW3RoaXMuZGF0ZS5nZXREYXkoKV0udG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgIHRoaXMuJHRpbWUuaW5uZXJIVE1MID0gdGhpcy5kYXRlLnRvTG9jYWxlVGltZVN0cmluZygpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJ1cGRhdGVUaGVtZSIsCiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVUaGVtZSh0aGVtZSkgewogICAgICAgICAgICAgICAgdmFyIHZhbCA9ICJncmVlbiI7CiAgICAgICAgICAgICAgICBpZiAoWyJncmVlbiIsICJyZWQiLCAiYmx1ZSIsICJnb2xkIl0uaW5kZXhPZih0aGVtZSkgPiAtMSkgewogICAgICAgICAgICAgICAgICAgIHZhbCA9IHRoZW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmNsYXNzTmFtZSA9ICJjb250YWluZXIgIiArIHZhbDsKICAgICAgICAgICAgfQogICAgICAgIH1dKTsKCiAgICAgICAgdmFyIF9EYXRlV2lkZ2V0ID0gRGF0ZVdpZGdldDsKICAgICAgICBEYXRlV2lkZ2V0ID0gV2ViQ29tcG9uZW50cy5hbm5vdGF0ZSh7CiAgICAgICAgICAgICJhdHRyaWJ1dGVzIjogewogICAgICAgICAgICAgICAgInByb3BlcnRpZXMiOiB7CiAgICAgICAgICAgICAgICAgICAgInRoZW1lIjogewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJzdHJpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAiZW51bSI6IFsiZ3JlZW4iLCAicmVkIiwgImJsdWUiLCAiZ29sZCJdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJyZXF1aXJlZCI6IFsidGhlbWUiXQogICAgICAgICAgICB9CiAgICAgICAgfSkoRGF0ZVdpZGdldCkgfHwgRGF0ZVdpZGdldDsKICAgICAgICByZXR1cm4gRGF0ZVdpZGdldDsKICAgIH0pKEhUTUxFbGVtZW50KTsKCiAgICBkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoJ2RhdGUtd2lkZ2V0JywgRGF0ZVdpZGdldCk7Cn0pKCk7","element":"date-widget","name":"date_widget"}],"translation":{"default":"en_GB"}}